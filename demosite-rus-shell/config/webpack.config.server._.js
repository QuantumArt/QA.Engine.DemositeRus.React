const path=require("path"),moduleFederationPlugin=require("./module-federation"),baseconfig=require("./webpack.config._"),CopyPlugin=require("copy-webpack-plugin"),nodeExternals=require("webpack-node-externals"),{merge}=require("webpack-merge"),webpackConfig={entry:path.resolve(__dirname,"../src/server/index"),mode:"production",target:"node",output:{path:path.resolve(__dirname,"../dist/server"),chunkFilename:"[name].[contenthash].js",filename:"main.js"},externalsType:"node-commonjs",plugins:[...moduleFederationPlugin.server,new CopyPlugin({patterns:[{context:"src/server",from:"views",to:"views"},{context:"src/app-settings-shell",from:"settings.json",to:"settings.json"}]})]};module.exports=merge(baseconfig,webpackConfig);